# 要件定義:「Flowstate」

## 1. アプリケーション概要

### 1.1 コンセプト

ポモドーロテクニックによる時間管理と, Pythonによる行動データ分析を組み合わせ, ユーザーにとって最も生産性の高い「時間帯」や「タスク傾向」を可視化・提案するWebアプリケーション.

### 1.2 開発目的（就活ポートフォリオとして）

- **フルスタック開発力の証明:** Next.js (Frontend) と Python (Backend) の連携.
- **データ活用能力の証明:** 蓄積したログデータを加工・分析し, ユーザーに価値ある情報としてフィードバックする.
- **DevOps意識:** Dockerによる環境構築とデプロイパイプラインの整備.

## 2. ターゲットユーザー

- **メイン:** 複数のタスク（研究, 開発, 勉強など）を抱える理系学生・エンジニア.
- **ペルソナ（自分自身）:**
    - 効率化が好き.
    - 「どの科目にどれくらい時間を使ったか」を客観的に知りたい.
    - 集中力が続く時間帯や条件を知り, スケジュールを最適化したい.
    - 勉強・作業ののログを分析し，より集中できる学習環境を整えたい．

## 3. 機能要件

### 3.1 フェーズ1: MVP (Minimum Viable Product) - 基礎機能

まずは「使って記録できる」状態を目指す.

- **タイマー機能:**
    - 25分(集中) + 5分(休憩) の標準カウントダウン.
    - タイマーの一時停止・リセット機能.
    - セッション完了時の通知（ブラウザ通知または音声）.
- **タスク管理・タグ付け:**
    - タイマー開始時に「取り組むタスク」を選択または入力.
    - カテゴリ（タグ）設定（例: 卒論, React学習, アルゴリズム, 読書）.
- **ログ保存:**
    - 開始日時, 終了日時, タグ, 完了ステータス（完走/中断）をDBに記録.
- **簡易ダッシュボード:**
    - 「今日の総集中時間」の表示.
    - 「今日完了したポモドーロ数」の表示.

### 3.2 フェーズ2: 分析・フィードバック (差別化機能)

ここが就活における最大のアピールポイント. Backend(Python)の強みを活かす.

- **ヒートマップ可視化:**
    - GitHubのContributionsグラフのように, 日々の努力量を色で表現.
- **タグ別構成比:**
    - 円グラフで学習バランスを表示（例: 研究 60%, 開発 30%, その他 10%）.
- **週次レポート:**
    - 先週と比較して生産性がどう変化したかを数値化して表示.

## 4. 非機能要件 (技術スタック)

### 4.1 アーキテクチャ構成

- **Frontend:** Next.js (App Router), TypeScript, Tailwind CSS
    - 理由: モダンなフロントエンド開発の標準スキルを示すため.
- **Backend:** Python (FastAPI)
    - 理由: 将来的なデータ分析・機械学習ロジックの拡張性と, Pythonスキルのアピールのため.
- **Database:** PostgreSQL
    - 理由: リレーショナルデータとして堅実に管理するため.
- **Environment:** Docker / Docker Compose
    - 理由: ローカル開発環境の再現性確保. M1 MacとLinuxサーバ(デプロイ先)での動作互換性のため.

### 4.2 UI/UX方針

- **Dark Mode First:** エンジニアが長時間見ても疲れない配色.
- **Minimalist Design:** 集中を阻害しないよう, タイマー画面は極力シンプルに.
- **Response:** タイマー操作はラグなく即応すること.

## 4. 非機能要件 (Update)

### 4.3 マルチデバイス対応戦略

- **Responsive Design (レスポンシブ):**
    - PC/Tablet/Mobile の3つのブレークポイントを設定.
    - Mobile時はハンバーガーメニューを採用し, 片手操作可能なUIにする.
- **PWA (Progressive Web App):**
    - manifest.json を設定し, スマホのホーム画面に追加可能にする.
    - iOS/Androidでのスタンドアロン起動（ブラウザ枠なし表示）に対応.

## 5. UI/UX方針 (Update)

- **Mobile First:**
    - PC版の縮小ではなく, 最初からスマホでの操作性を考慮してボタンサイズ（44px以上）を設計する.

## 5. データモデル (ER図案)

最低限必要なテーブル設計案.

### Users (ユーザー)

| **Column** | **Type** | **Description** |
| --- | --- | --- |
| id | UUID | PK |
| username | String | 表示名 |
| email | String | (認証用) |

### Categories (タグ/カテゴリ)

| **Column** | **Type** | **Description** |
| --- | --- | --- |
| id | Int | PK |
| name | String | 例: "卒論", "Dev" |
| color_code | String | グラフ表示用の色 |
| user_id | UUID | FK |

### FocusSessions (集中ログ)

| **Column** | **Type** | **Description** |
| --- | --- | --- |
| id | UUID | PK |
| user_id | UUID | FK |
| category_id | Int | FK |
| start_time | Datetime | 開始時刻 |
| end_time | Datetime | 終了時刻 |
| duration_minutes | Int | 実績時間 (通常25) |
| status | Enum | COMPLETED, ABORTED |
| note | Text | 任意: 一言メモ |

---